{"ast":null,"code":"import Editor from '@tinymce/tinymce-vue';\nimport './tinymce.min.js';\nimport './icons/default/icons.min.js';\nimport '../../assets/tinymce/themes/silver/theme.min.js';\nimport './langs/zh_CN';\n\n// 注册插件\nimport './plugins/preview/plugin.min.js';\nimport './plugins/paste/plugin.min.js';\nimport './plugins/wordcount/plugin.min.js';\nimport './plugins/code/plugin.min.js';\nimport './plugins/image/plugin.min.js';\nimport './plugins/imagetools/plugin.min.js';\nimport './plugins/media/plugin.min.js';\nimport './plugins/codesample/plugin.min.js';\nimport './plugins/lists/plugin.min.js';\nimport './plugins/table/plugin.min.js';\nexport default {\n  components: {\n    Editor\n  },\n  props: {\n    value: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      init: {\n        language: 'zh_CN',\n        height: '600px',\n        plugins: 'preview paste wordcount code imagetools image media codesample lists table',\n        branding: false,\n        paste_data_images: true,\n        toolbar: ['undo redo | styleselect |fontsizeselect| bold italic underline strikethrough |alignleft aligncenter alignright alignjustify |blockquote removeformat |numlist bullist table', 'preview paste code codesample |image media'],\n        //上传图片\n        images_upload_handler: async (blobInfo, succFun, failFun) => {\n          let formdata = new FormData();\n          formdata.append('file', blobInfo.blob(), blobInfo.name());\n          const {\n            data: res\n          } = await this.$http.post('upload', formdata);\n          succFun(res.url);\n          failFun(this.$message.error('上传图片失败'));\n        },\n        imagetools_cors_hosts: ['*'],\n        imagetools_proxy: ''\n      },\n      content: this.value\n    };\n  },\n  watch: {\n    value(newV) {\n      this.content = newV;\n    },\n    content(newV) {\n      this.$emit('input', newV);\n    }\n  }\n};","map":{"version":3,"names":["Editor","components","props","value","type","String","default","data","init","language","height","plugins","branding","paste_data_images","toolbar","images_upload_handler","blobInfo","succFun","failFun","formdata","FormData","append","blob","name","res","$http","post","url","$message","error","imagetools_cors_hosts","imagetools_proxy","content","watch","newV","$emit"],"sources":["src/components/editor/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Editor :init=\"init\" v-model=\"content\"></Editor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport './tinymce.min.js'\r\nimport './icons/default/icons.min.js'\r\nimport '../../assets/tinymce/themes/silver/theme.min.js'\r\n\r\nimport './langs/zh_CN'\r\n\r\n// 注册插件\r\nimport './plugins/preview/plugin.min.js'\r\nimport './plugins/paste/plugin.min.js'\r\nimport './plugins/wordcount/plugin.min.js'\r\nimport './plugins/code/plugin.min.js'\r\n\r\nimport './plugins/image/plugin.min.js'\r\nimport './plugins/imagetools/plugin.min.js'\r\nimport './plugins/media/plugin.min.js'\r\nimport './plugins/codesample/plugin.min.js'\r\nimport './plugins/lists/plugin.min.js'\r\nimport './plugins/table/plugin.min.js'\r\n\r\nexport default {\r\n  components: { Editor },\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      init: {\r\n        language: 'zh_CN',\r\n        height: '600px',\r\n        plugins: 'preview paste wordcount code imagetools image media codesample lists table',\r\n        branding: false,\r\n        paste_data_images: true,\r\n        toolbar: [\r\n          'undo redo | styleselect |fontsizeselect| bold italic underline strikethrough |alignleft aligncenter alignright alignjustify |blockquote removeformat |numlist bullist table',\r\n          'preview paste code codesample |image media',\r\n        ],\r\n        //上传图片\r\n        images_upload_handler: async (blobInfo, succFun, failFun) => {\r\n          let formdata = new FormData()\r\n          formdata.append('file', blobInfo.blob(), blobInfo.name())\r\n          const { data: res } = await this.$http.post('upload', formdata)\r\n          succFun(res.url)\r\n          failFun(this.$message.error('上传图片失败'))\r\n        },\r\n        imagetools_cors_hosts: ['*'],\r\n        imagetools_proxy: '',\r\n      },\r\n      content: this.value,\r\n    }\r\n  },\r\n  watch: {\r\n    value(newV) {\r\n      this.content = newV\r\n    },\r\n    content(newV) {\r\n      this.$emit('input', newV)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import url('../../assets/tinymce/skins/ui/oxide/skin.min.css');\r\n@import url('../../assets/tinymce/skins/content/default/content.min.css');\r\n</style>\r\n"],"mappings":"AAOA,OAAAA,MAAA;AACA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAC,UAAA;IAAAD;EAAA;EACAE,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,MAAA;QACAC,OAAA;QACAC,QAAA;QACAC,iBAAA;QACAC,OAAA,GACA,+KACA,6CACA;QACA;QACAC,qBAAA,QAAAA,CAAAC,QAAA,EAAAC,OAAA,EAAAC,OAAA;UACA,IAAAC,QAAA,OAAAC,QAAA;UACAD,QAAA,CAAAE,MAAA,SAAAL,QAAA,CAAAM,IAAA,IAAAN,QAAA,CAAAO,IAAA;UACA;YAAAhB,IAAA,EAAAiB;UAAA,eAAAC,KAAA,CAAAC,IAAA,WAAAP,QAAA;UACAF,OAAA,CAAAO,GAAA,CAAAG,GAAA;UACAT,OAAA,MAAAU,QAAA,CAAAC,KAAA;QACA;QACAC,qBAAA;QACAC,gBAAA;MACA;MACAC,OAAA,OAAA7B;IACA;EACA;EACA8B,KAAA;IACA9B,MAAA+B,IAAA;MACA,KAAAF,OAAA,GAAAE,IAAA;IACA;IACAF,QAAAE,IAAA;MACA,KAAAC,KAAA,UAAAD,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}